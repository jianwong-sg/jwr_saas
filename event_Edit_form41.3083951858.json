{
	"type": "EVENT_BUTTON",
	"name": "Edit_form41",
	"serverCode": "// 1. Get the primary key value (ID) of the current record.\r\n// This value comes directly from the grid row, making it safe for use in the WHERE clause.\r\n$record = $button->getCurrentRecord();\r\n$recordId = $record[\"id\"];\r\n\r\n// 2. Build the SQL UPDATE statement.\r\n// We use simple concatenation for the WHERE clause, relying on $recordId being safe.\r\n$sql = \"UPDATE forms SET \r\n    sign_landlord1=NULL, \r\n    sign_landlord2=NULL, \r\n    sign_landlord3=NULL, \r\n    sign_landlord4=NULL, \r\n    sign_tenant1=NULL, \r\n    sign_tenant2=NULL, \r\n    sign_tenant3=NULL, \r\n    sign_tenant4=NULL, \r\n    sign_seller1=NULL, \r\n    sign_seller2=NULL, \r\n    sign_seller3=NULL, \r\n    sign_seller4=NULL, \r\n    sign_buyer1=NULL, \r\n    sign_buyer2=NULL, \r\n    sign_buyer3=NULL, \r\n    sign_buyer4=NULL, \r\n    sign1=NULL, \r\n    sign2=NULL, \r\n    sign3=NULL, \r\n    sign4=NULL, \r\n    sign5=NULL, \r\n    sign6=NULL, \r\n    sign7=NULL, \r\n    sign8=NULL, \r\n    sign9=NULL,\r\n    sign_date1=NULL, \r\n    sign_date2=NULL, \r\n    sign_date3=NULL, \r\n    sign_date4=NULL, \r\n    sign_interpreter1=NULL, \r\n    sign_interpreter2=NULL, \r\n    sign_interpreter3=NULL, \r\n    sign_interpreter4=NULL, \r\n    interpretdate1=NULL, \r\n    interpretdate2=NULL, \r\n    interpretdate3=NULL, \r\n    interpretdate4=NULL, \r\n    sign_agent=NULL, \r\n    date_sign=NULL\r\n    WHERE id=\" . $recordId; \r\n\r\n// 3. Execute the query using the global CustomQuery function.\r\n// This function is accessible in this scope and requires only the raw SQL string.\r\nCustomQuery($sql); \r\n\r\n// Pass the ID to the client (optional)\r\n$result[\"id\"] = $recordId;\r\n",
	"beforeJsCode": "swal(\"Editing this form will remove all existing electronic signatures. If you edit the form after it has been eSigned, everyone will need to eSign it again.\\n\\nDo you wish to proceed?\", {\r\n  icon: 'warning',\r\n  buttons: {\r\n    cancel: \"Cancel\",\r\n    proceed: {\r\n      text: \"Yes, proceed to Update\",\r\n      value: \"proceed\",\r\n    }\r\n  },\r\n})\r\n.then((value) => {\r\n  switch (value) {\r\n    case \"proceed\":\r\n      swal(\"Are you sure you want to confirm this action?\", {\r\n        icon: 'warning',\r\n        buttons: {\r\n          cancel: \"No, go back\",\r\n          confirm: {\r\n            text: \"Yes, confirm\",\r\n            value: \"confirm\",\r\n          }\r\n        },\r\n      })\r\n      .then((confirmValue) => {\r\n        if (confirmValue === \"confirm\") {\r\n          submit(); // Call your submit function here\r\n        }\r\n      });\r\n      break;\r\n  }\r\n});\r\nreturn false;\r\n",
	"afterJsCode": "// Select the button with id starting with 'editLink' and having the specified attributes\r\nvar button = $(\"[data-itemtype='grid_edit'][data-itemid='edit_form'] a[id^='editLink']\");\r\n\r\n// Check if the button exists\r\nif (button.length > 0) {\r\n    // Trigger the click event\r\n    button.click();\r\n} else {\r\n    console.log(\"Button not found.\");\r\n}\r\n\r\n// Prevent default action and stop further processing\r\nreturn false;\r\n\r\n"
}